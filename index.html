<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canal Pilot - Lookahead Calculation</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .container { display: flex; }
        .input-controls { width: 30%; padding: 20px; }
        .results { width: 70%; padding: 20px; }
        .badge { padding: 5px; border-radius: 5px; color: white; }
        .lock { background-color: red; }
        .bridge { background-color: teal; }
        .marina { background-color: blue; }
        .wharf { background-color: green; }
        .water { background-color: lightblue; }
        .tunnel { background-color: gray; }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-controls">
            <h2>Input Controls</h2>
            <label for="speed">Speed (km/h):</label>
            <input type="number" id="speed" placeholder="Enter speed"><br><br>
            <label for="lookahead">Lookahead (hours):</label>
            <input type="number" id="lookahead" placeholder="Enter lookahead hours"><br><br>
            <button onclick="calculateLookahead()">Calculate</button>
        </div>
        <div class="results">
            <h2>Upcoming Canal Features</h2>
            <div id="featureList"></div>
            <div id="stats">
                <h3>Statistics</h3>
                <p>Total Features Ahead: <span id="totalFeatures">0</span></p>
                <p>Distance Range: <span id="distanceRange">0 km</span></p>
                <p>Locks Ahead: <span id="locksAhead">0</span></p>
            </div>
        </div>
    </div>

    <script src="testCorridor.js"></script>
    <script>
        function calculateLookahead() {
            const speed = document.getElementById('speed').value;
            const lookaheadHours = document.getElementById('lookahead').value;
            const lookaheadDistance = speed * lookaheadHours;

            const features = []; // Load your features data from the testCorridor
            // Assuming features data has `type`, `distance`, `ETA`, `chainage`, `locks` properties

            const upcomingFeatures = features.filter(feature => feature.distance <= lookaheadDistance);
            upcomingFeatures.sort((a, b) => a.distance - b.distance);
            const featureList = document.getElementById('featureList');
            featureList.innerHTML = '';

            upcomingFeatures.forEach(feature => {
                const featureDiv = document.createElement('div');
                featureDiv.innerHTML = `<span class='badge ${feature.type}'>${feature.type}</span> ` +
                    `Distance: ${feature.distance} km, ETA: ${feature.ETA}, Chainage: ${feature.chainage}, Locks: ${feature.locks}`;
                featureList.appendChild(featureDiv);
            });

            // Update statistics
            document.getElementById('totalFeatures').innerText = upcomingFeatures.length;
            document.getElementById('distanceRange').innerText = lookaheadDistance + ' km';
            const locksCount = upcomingFeatures.reduce((count, feature) => count + feature.locks, 0);
            document.getElementById('locksAhead').innerText = locksCount;
        }
    </script>
</body>
</html>