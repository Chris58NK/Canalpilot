<!DOCTYPE html>
<html>
<head>
    <title>Map</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        #map { height: 400px; }
    </style>
</head>
<body>
    <h1>Leaflet Map Example</h1>
    <div id="map"></div>
    <input type="text" id="searchInput" placeholder="Search...">
    <script>
        var map = L.map('map').setView([51.505, -0.09], 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        var marker = L.marker([51.5, -0.09]).addTo(map);

        function updateRoute() {
            var dist = Math.abs(calculateDistance(marker.getLatLng(), [51.505, -0.09]));
            console.log('Distance: ', dist);
        }

        function calculateDistance(latlng1, latlng2) {
            var R = 6371; // Radius of the Earth in km
            var dLat = (latlng2[0] - latlng1.lat) * Math.PI / 180;
            var dLon = (latlng2[1] - latlng1.lng) * Math.PI / 180;
            var a = 
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(latlng1.lat * Math.PI / 180) * Math.cos(latlng2[0] * Math.PI / 180) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            var distance = R * c;
            return distance;
        }

        function calculateLookahead(feature) {
            var featureDistance = Math.abs(calculateDistance(feature.latlng, marker.getLatLng()));
            return featureDistance;
        }

        // Example of using updateRoute
        updateRoute();
    </script>
</body>
</html>